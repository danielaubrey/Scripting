#!/usr/bin/python

# Example to produce global and conditional interface configuration 

print ("")
print ("!")
print ("aaa authentication dot1x default group radius")
print ("aaa accounting dot1x default start-stop group radius")
print ("dot1x system-auth-control")
print ("!")
print ("")
print ("!")
print ("radius-server attribute 6 on-for-login-auth")
print ("radius-server attribute 8 include-in-access-req")
print ("radius-server attribute 25 access-request include")
print ("radius-server dead-criteria time 5 tries 3")
print ("radius-server host 10.3.164.2 auth-port 1812 acct-port 1813 key 7 1235041A0204030A1F3F2B383A342C300F1F0F0D5F785D415B1D0C1444")
print ("radius-server host 10.3.164.3 auth-port 1812 acct-port 1813 key 7 080D4D4319160A19271F0314232A2A0B3B3C2E1F0E370613594A575F06")
print ("radius-server vsa send accounting")
print ("radius-server vsa send authentication")
print ("!")
print ("")

with  open('switch.cfg') as fp:
    contents = fp.read()
    contents = contents.split('!')
    for entry in contents:
        configblock = entry.split('\n')
        if 'description IP Phone' in entry:
            #print (configblock)
            print("!")
            print (configblock[1])	       
            print ("authentication event server dead action authorize") 
            print ("authentication event server dead action authorize voice")
            print ("authentication event server alive action reinitialize")
            print ("authentication host-mode multi-auth")
            print ("authentication open")
            print ("authentication order dot1x mab")
            print ("authentication priority dot1x mab")
            print ("authentication port-control auto")
            print ("authentication timer reauthenticate 120")
            print ("authentication violation restrict")
            print ("mab")
            print ("dot1x pae authenticator")
            print ("dot1x timeout tx-period 3")
            print ("shut")
            print ("no shut")
            print ("!")
            #print ("\n")
